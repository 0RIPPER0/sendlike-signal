<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SendLike â€” P2P</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
</head>
<body>
  <div id="landing">
    <div class="plane"></div>
    <div class="contrail"></div>
  </div>

  <div id="app" hidden>
    <header class="top">
      <div class="brand">SendLike</div>
      <div class="spacer"></div>
      <button id="aboutBtn" class="btn">About</button>
    </header>

    <section class="modeRow">
      <label class="switch">
        <input type="checkbox" id="modeSwitch" />
        <span class="slider"></span>
      </label>
      <span id="modeLabel">ğŸŒ Online Mode</span>
    </section>

    <section id="sessionInfo" class="session" hidden>
      <div>Code: <span id="sessionCode">â€”â€”â€”</span></div>
      <div>Role: <span id="sessionRole">â€”</span></div>
      <div>Status: <span id="sessionStatus">Active</span></div>
      <div id="openShareWrap" hidden>
        <label class="switch small">
          <input type="checkbox" id="openShareSwitch"/>
          <span class="slider"></span>
        </label>
        <span id="openShareLabel">ğŸ”’ Host-only sending</span>
      </div>
      <button id="disbandBtn" class="btn danger" hidden>Disband</button>
    </section>

    <section class="cards">
      <div id="cardOnlineJoin" class="card">
        <h3>Join</h3>
        <input id="nameOnline" placeholder="Your name" />
        <input id="joinCode" placeholder="6-digit code" />
        <button id="joinBtn" class="btn">Join</button>
      </div>
      <div id="cardOnlineCreate" class="card">
        <h3>Create</h3>
        <input id="nameHost" placeholder="Your name" />
        <button id="createBtn" class="btn">Create Group</button>
      </div>
    </section>

    <section class="peopleWrap">
      <h3 id="peopleTitle">Members</h3>
      <div id="peopleList" class="people"></div>
    </section>

    <section class="p2pWrap card">
      <h3>Direct P2P (no server bandwidth)</h3>
      <p class="muted">This uses WebRTC DataChannel with <strong>STUN only</strong>. No TURN, no relay, no payload on your server. You must exchange the Offer/Answer blobs manually (paste or send via any messenger).</p>
      <div class="p2pFlex">
        <div class="p2pCol">
          <h4>Step 1 â€” Create Offer (Sender)</h4>
          <button id="p2pCreateOffer" class="btn">Create Offer</button>
          <textarea id="p2pOffer" placeholder="Your offer (copy this and send to receiver)"></textarea>
        </div>
        <div class="p2pCol">
          <h4>Step 2 â€” Paste Remote Answer</h4>
          <textarea id="p2pAnswerIn" placeholder="Paste receiver's answer here"></textarea>
          <button id="p2pAcceptAnswer" class="btn">Accept Answer</button>
        </div>
      </div>
      <div class="p2pFlex">
        <div class="p2pCol">
          <h4>Receiver â€” Paste Offer</h4>
          <textarea id="p2pOfferIn" placeholder="Paste sender's offer here"></textarea>
          <button id="p2pMakeAnswer" class="btn">Create Answer</button>
        </div>
        <div class="p2pCol">
          <h4>Receiver â€” Your Answer</h4>
          <textarea id="p2pAnswerOut" placeholder="Copy this and send back to sender"></textarea>
        </div>
      </div>
      <div class="p2pHint muted">Once connected, pick a file and send. No server traffic is used for transfer.</div>
    </section>

    <input id="fileInput" type="file" multiple hidden />

    <button id="chatToggleBtn" class="fab">ğŸ’¬</button>
    <span id="chatNotifDot" class="dot"></span>
    <div id="chatBox" hidden>
      <div class="chatHead">
        <span>Chat</span>
        <button id="chatCloseBtn" class="btn">âœ•</button>
      </div>
      <div id="chatMessages" class="chatMessages"></div>
      <div class="chatSend">
        <input id="chatInput" placeholder="Message" />
        <button id="sendChatBtn" class="btn">Send</button>
      </div>
    </div>
  </div>

  <div id="dropOverlay"><div>Drop files to send</div></div>

  <script src="script.js"></script>
</body>
</html>
